{%- set lineNrLengthBefore   = fileDiffViewModel.selectedFile.maxLineNumberLength(true) -%}
{%- set lineNrLengthAfter    = fileDiffViewModel.selectedFile.maxLineNumberLength(false) -%}
{%- set replyCommentForm     = fileDiffViewModel.replyCommentForm -%}
{%- set commentsViewModel    = fileDiffViewModel.commentsViewModel -%}
{%- set file                 = fileDiffViewModel.selectedFile -%}

<div class="!review-grid-code" style="display: grid; grid-template-rows: auto 1fr; overflow-y: auto">
    <div class="!diff-file__file-revision-info clearfix pb-2">
        <div class="float-start">
            <div>
                {%- if file.rename -%}
                    <span class="diff-file__file-change-state text-primary">â†—</span>
                {%- elseif file.added -%}
                    <span class="diff-file__file-change-state text-success">+</span>
                {%- elseif file.deleted -%}
                    <span class="diff-file__file-change-state text-danger">-</span>
                {%- elseif file.modified -%}
                    <span class="diff-file__file-change-state text-primary">*</span>
                {%- endif -%}
                <span class="diff-file__file-name fw-bold text-primary">{{ file.filename }}</span>
                <span class="diff-file__directory-name">{{ file.dirname }}</span>
            </div>

            {%- if file.rename -%}
                <div class="diff-file__file-mode-change">{{ 'renamed.from'|trans }} {{ file.filePathBefore }}</div>
            {%- endif -%}

            {%- if file.fileModeBefore is not same as (null) and file.fileModeBefore != file.fileModeAfter -%}
                <div class="diff-file__file-mode-change">{{ 'file.mode.changed'|trans }} {{ file.fileModeBefore }} &gt; {{ file.fileModeAfter }}</div>
            {%- endif -%}
        </div>

        <div class="btn-group btn-group-sm float-end pe-2">
            {% set currentDiffMode = fileDiffViewModel.diffMode.value %}
            {% for diffMode in fileDiffViewModel.diffModes %}
                <a href="{{ url_query_params({diff: diffMode}) }}"
                   class="btn {{ currentDiffMode == diffMode ? 'btn-primary' : 'btn-outline-primary' }}"
                        {{ stimulus_controller('button') }}
                >
                    {{ ('diff.' ~ diffMode)|trans }}
                </a>
            {% endfor %}
        </div>
    </div>

    <div style="display: grid;grid-template-columns: 1fr 1fr; overflow-y: auto">
        <div style="overflow: auto; background: #f6cdcd; max-height: 100%">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tincidunt blandit semper. In feugiat suscipit mi vel iaculis. Aenean consequat dapibus velit, eu pellentesque tellus posuere vel. Donec ac eleifend erat. Vivamus non viverra nisl. Phasellus id ullamcorper turpis, ut ornare risus. Suspendisse condimentum dolor at nulla aliquam semper. Donec tempor turpis tortor, ac posuere purus feugiat id. Ut hendrerit vitae odio nec interdum. Phasellus ac commodo mi.
            Suspendisse orci dolor, pellentesque quis feugiat ac, blandit vel odio. Phasellus sed pretium mi. Donec rutrum commodo sem sed luctus. Vivamus lectus diam, efficitur eu tortor id, efficitur bibendum lacus. Aenean ut odio eget leo iaculis cursus. Cras non tempus ante. Aliquam pellentesque odio et nibh venenatis faucibus.
            Phasellus facilisis augue eget neque laoreet, non elementum arcu venenatis. Donec dignissim nunc sem. Fusce sed nisi sit amet sem tempus euismod quis id diam. Suspendisse potenti. Nulla eleifend tortor ac mollis auctor. Maecenas in ornare ante. Nulla rutrum, purus nec egestas facilisis, felis enim convallis mi, mattis rutrum elit nunc nec ante. Duis vehicula vitae dui sed gravida. Integer mi leo, tincidunt vitae convallis eu, bibendum vel turpis. Etiam vel tempor nunc. Nunc ultrices metus risus, a venenatis dui commodo quis. Suspendisse congue nibh laoreet nisl pharetra, at pretium purus consequat. Fusce lobortis lectus metus, ac vehicula sapien egestas non. Phasellus in quam luctus, tempor diam eu, pellentesque mi. Morbi interdum volutpat dapibus. Donec rutrum est id risus semper auctor.
            Proin elit dolor, mollis non vulputate non, tincidunt quis ligula. Praesent efficitur molestie metus quis fringilla. Nunc a nisl et nibh molestie consectetur id ut nulla. Cras lacus est, egestas blandit commodo ac, cursus eget leo. Ut consequat tempor vehicula. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut quis nulla nunc. Donec ac dignissim purus.
            Maecenas eu faucibus nulla. Vestibulum ut tempus dui. Curabitur a gravida justo. Aliquam non est sodales, lobortis nisi a, convallis mi. Integer at faucibus eros. Nam laoreet lectus ac consectetur tincidunt. Mauris nunc sapien, imperdiet et enim sed, scelerisque blandit augue. Aenean sed eleifend nibh, ac interdum lectus. Maecenas nec libero et nisi rutrum efficitur at eu mauris. Sed eget viverra odio. Praesent non mauris eu neque viverra porta.
            Sed nec urna at massa scelerisque mollis. Ut auctor faucibus blandit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec sit amet sem sodales, molestie magna porta, malesuada velit. Curabitur ornare orci porta, volutpat sem ut, tincidunt dolor. Nunc metus metus, fringilla ac libero vitae, ullamcorper tempor augue. Sed bibendum convallis magna. Etiam posuere, nisi a pharetra condimentum, odio enim accumsan urna, nec consectetur nulla enim quis turpis. Vestibulum sed arcu quis magna vestibulum pellentesque. Pellentesque hendrerit quam nec cursus semper.
            Donec varius lectus consequat pellentesque elementum. Quisque eu neque posuere, pellentesque metus vel, porta diam. Integer vel elit a dolor pulvinar posuere. Mauris at lobortis libero. Integer efficitur purus hendrerit venenatis bibendum. Donec venenatis dapibus efficitur. Cras eget consectetur quam. Fusce sed turpis sodales, tempor orci at, accumsan velit. Fusce posuere nec odio sit amet dignissim. Aenean sagittis at nibh id rutrum. Morbi consectetur odio vitae nisi malesuada pulvinar sed eleifend ante. Sed nisl orci, mollis a vehicula a, malesuada vel risus. Nullam elit urna, posuere vel consectetur a, pharetra sit amet nunc. Proin tortor erat, sodales ac pulvinar eu, maximus et eros. Donec accumsan dui vitae fermentum iaculis. Nullam porttitor finibus velit ac efficitur.
            Pellentesque a tincidunt ante, accumsan faucibus mauris. Donec viverra erat ac leo tristique efficitur. Fusce vel enim at eros mattis molestie. Suspendisse ultrices sapien vel est finibus, sit amet congue ipsum finibus. Nunc eu diam quis augue pharetra ultricies et non mauris. Praesent finibus scelerisque erat in ullamcorper. Fusce ultrices sed tellus a aliquam. Donec facilisis, felis ut sollicitudin aliquam, purus lacus ultricies lectus, at pretium nibh enim ut turpis. Suspendisse quis ipsum malesuada nulla bibendum semper. Quisque sollicitudin lacus ut cursus convallis.
            Nullam mi ex, ullamcorper eu erat at, malesuada dignissim odio. Quisque vitae volutpat mi, quis vehicula lectus. Integer est leo, scelerisque at mauris ut, pharetra elementum purus. Donec mollis viverra lorem, ut cursus erat euismod ac. In non suscipit velit. Donec bibendum accumsan lacinia. Nulla eros magna, tempus vestibulum feugiat sit amet, malesuada non turpis. Cras metus nulla, sodales at aliquam sed, mattis quis ex. Pellentesque nec venenatis sapien. Mauris tempor congue nulla sit amet pharetra. Integer sit amet nunc dolor. Suspendisse tempor semper ligula. Morbi vitae massa sed ex molestie rhoncus at eu augue. Duis venenatis, erat sed eleifend vestibulum, dolor diam mollis sapien, ut ornare nisi risus sed augue.
            Proin bibendum ultrices turpis eget laoreet. Pellentesque molestie sapien nec pretium vehicula. Praesent in massa ut sapien congue pharetra. Suspendisse volutpat mollis dolor, in volutpat mauris convallis ut. Nullam id vulputate felis. Maecenas ac quam et mauris congue pharetra. Cras sed eros arcu. Nunc at vehicula diam. Proin ultricies dolor turpis, id facilisis justo cursus nec.
        </div>
        <div style="overflow: auto; background: #ddffdd; max-height: 100%">
           Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tincidunt blandit semper. In feugiat suscipit mi vel iaculis. Aenean consequat dapibus velit, eu pellentesque tellus posuere vel. Donec ac eleifend erat. Vivamus non viverra nisl. Phasellus id ullamcorper turpis, ut ornare risus. Suspendisse condimentum dolor at nulla aliquam semper. Donec tempor turpis tortor, ac posuere purus feugiat id. Ut hendrerit vitae odio nec interdum. Phasellus ac commodo mi.
            Suspendisse orci dolor, pellentesque quis feugiat ac, blandit vel odio. Phasellus sed pretium mi. Donec rutrum commodo sem sed luctus. Vivamus lectus diam, efficitur eu tortor id, efficitur bibendum lacus. Aenean ut odio eget leo iaculis cursus. Cras non tempus ante. Aliquam pellentesque odio et nibh venenatis faucibus.
            Phasellus facilisis augue eget neque laoreet, non elementum arcu venenatis. Donec dignissim nunc sem. Fusce sed nisi sit amet sem tempus euismod quis id diam. Suspendisse potenti. Nulla eleifend tortor ac mollis auctor. Maecenas in ornare ante. Nulla rutrum, purus nec egestas facilisis, felis enim convallis mi, mattis rutrum elit nunc nec ante. Duis vehicula vitae dui sed gravida. Integer mi leo, tincidunt vitae convallis eu, bibendum vel turpis. Etiam vel tempor nunc. Nunc ultrices metus risus, a venenatis dui commodo quis. Suspendisse congue nibh laoreet nisl pharetra, at pretium purus consequat. Fusce lobortis lectus metus, ac vehicula sapien egestas non. Phasellus in quam luctus, tempor diam eu, pellentesque mi. Morbi interdum volutpat dapibus. Donec rutrum est id risus semper auctor.
            Proin elit dolor, mollis non vulputate non, tincidunt quis ligula. Praesent efficitur molestie metus quis fringilla. Nunc a nisl et nibh molestie consectetur id ut nulla. Cras lacus est, egestas blandit commodo ac, cursus eget leo. Ut consequat tempor vehicula. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut quis nulla nunc. Donec ac dignissim purus.
            Maecenas eu faucibus nulla. Vestibulum ut tempus dui. Curabitur a gravida justo. Aliquam non est sodales, lobortis nisi a, convallis mi. Integer at faucibus eros. Nam laoreet lectus ac consectetur tincidunt. Mauris nunc sapien, imperdiet et enim sed, scelerisque blandit augue. Aenean sed eleifend nibh, ac interdum lectus. Maecenas nec libero et nisi rutrum efficitur at eu mauris. Sed eget viverra odio. Praesent non mauris eu neque viverra porta.
            Sed nec urna at massa scelerisque mollis. Ut auctor faucibus blandit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec sit amet sem sodales, molestie magna porta, malesuada velit. Curabitur ornare orci porta, volutpat sem ut, tincidunt dolor. Nunc metus metus, fringilla ac libero vitae, ullamcorper tempor augue. Sed bibendum convallis magna. Etiam posuere, nisi a pharetra condimentum, odio enim accumsan urna, nec consectetur nulla enim quis turpis. Vestibulum sed arcu quis magna vestibulum pellentesque. Pellentesque hendrerit quam nec cursus semper.
            Donec varius lectus consequat pellentesque elementum. Quisque eu neque posuere, pellentesque metus vel, porta diam. Integer vel elit a dolor pulvinar posuere. Mauris at lobortis libero. Integer efficitur purus hendrerit venenatis bibendum. Donec venenatis dapibus efficitur. Cras eget consectetur quam. Fusce sed turpis sodales, tempor orci at, accumsan velit. Fusce posuere nec odio sit amet dignissim. Aenean sagittis at nibh id rutrum. Morbi consectetur odio vitae nisi malesuada pulvinar sed eleifend ante. Sed nisl orci, mollis a vehicula a, malesuada vel risus. Nullam elit urna, posuere vel consectetur a, pharetra sit amet nunc. Proin tortor erat, sodales ac pulvinar eu, maximus et eros. Donec accumsan dui vitae fermentum iaculis. Nullam porttitor finibus velit ac efficitur.
            Pellentesque a tincidunt ante, accumsan faucibus mauris. Donec viverra erat ac leo tristique efficitur. Fusce vel enim at eros mattis molestie. Suspendisse ultrices sapien vel est finibus, sit amet congue ipsum finibus. Nunc eu diam quis augue pharetra ultricies et non mauris. Praesent finibus scelerisque erat in ullamcorper. Fusce ultrices sed tellus a aliquam. Donec facilisis, felis ut sollicitudin aliquam, purus lacus ultricies lectus, at pretium nibh enim ut turpis. Suspendisse quis ipsum malesuada nulla bibendum semper. Quisque sollicitudin lacus ut cursus convallis.
            Nullam mi ex, ullamcorper eu erat at, malesuada dignissim odio. Quisque vitae volutpat mi, quis vehicula lectus. Integer est leo, scelerisque at mauris ut, pharetra elementum purus. Donec mollis viverra lorem, ut cursus erat euismod ac. In non suscipit velit. Donec bibendum accumsan lacinia. Nulla eros magna, tempus vestibulum feugiat sit amet, malesuada non turpis. Cras metus nulla, sodales at aliquam sed, mattis quis ex. Pellentesque nec venenatis sapien. Mauris tempor congue nulla sit amet pharetra. Integer sit amet nunc dolor. Suspendisse tempor semper ligula. Morbi vitae massa sed ex molestie rhoncus at eu augue. Duis venenatis, erat sed eleifend vestibulum, dolor diam mollis sapien, ut ornare nisi risus sed augue.
            Proin bibendum ultrices turpis eget laoreet. Pellentesque molestie sapien nec pretium vehicula. Praesent in massa ut sapien congue pharetra. Suspendisse volutpat mollis dolor, in volutpat mauris convallis ut. Nullam id vulputate felis. Maecenas ac quam et mauris congue pharetra. Cras sed eros arcu. Nunc at vehicula diam. Proin ultricies dolor turpis, id facilisis justo cursus nec.
        </div>
    </div>
</div>
