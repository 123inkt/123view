{% extends 'app/app.wide.base.html.twig' %}

{%- block page_content -%}
    {% set review = reviewModel.review %}
    {% set reviewer = reviewModel.getReviewer(app.user) %}

    <div class="review-reload-required bg-primary text-white rounded-bottom ps-2 pe-2 pt-1 pb-1"
         {{ stimulus_controller('review-changed-notification') }}
         data-review-changed-notification-review-id-value="{{ review.id }}"
         data-review-changed-notification-user-id-value="{{ app.user.id }}">
        {{ 'review.was.updated'|trans }}.
        <a href="#" class="text-white" data-action="click->review-changed-notification#reload">{{ 'click.to.reload'|trans }}</a>
    </div>

    <div class="review-grid-layout" {{ stimulus_controller('review') }}>
        {%- include 'app/review/review.header.html.twig' with {reviewModel, review} -%}

        {%- include 'app/review/review.sidebar.html.twig' -%}

        {%- if reviewModel.timelineViewModel is not same as (null) -%}
            <div class="review-grid-code">
                {%- include 'app/review/review.timeline.html.twig' with {timelineViewModel: reviewModel.timelineViewModel} %}
            </div>
        {%- elseif reviewModel.fileDiffViewModel is not same as (null) -%}
            <div class="review-grid-code" >
                {%- include 'app/review/commit/commit.file.html.twig' with {fileDiffViewModel: reviewModel.fileDiffViewModel} %}
            </div>
        {%- endif -%}
    </div>

    {%- include 'app/review/notification/review.notifications.html.twig' -%}
{%- endblock -%}
