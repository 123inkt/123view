{% extends 'app/app.base.html.twig' %}

{% block page_content %}
    {% set review = attachRevisionsModel.review %}
    {% set revisionsModel = attachRevisionsModel.revisionsViewModel %}

    <div class="mt-2 pb-3">
       <button type="submit" class="btn btn-primary">Attach to review CR-{{ review.projectId }}</button>
        <a href="{{ path('DR\\GitCommitNotification\\Controller\\App\\Review\\ReviewController', {id: review.id}) }}"
           class="btn btn-outline-secondary">{{ 'Cancel'|trans }}</a>
    </div>

    {%- include 'app/revision/revisions.searchbar.html.twig' with {searchQuery: revisionsModel.searchQuery} -%}

    <table class="table table-bordered table-hover rule-table">
        <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">{{ 'hash'|trans }}</th>
            <th scope="col">{{ 'title'|trans }}</th>
            <th scope="col">{{ 'author'|trans }}</th>
            <th scope="col">{{ 'at'|trans }}</th>
        </tr>
        </thead>

        <tbody>
        {%- for revision in revisionsModel.revisions -%}
            <tr>
                <td><input type="checkbox" class="form-check-input" name="revision[{{ revision.id }}]"></td>
                <td><code>{{ revision.commitHash|slice(0, 7) }}</code></td>
                <td class="fw-bold">{{ revision.title|external_links(revisionsModel.externalLinks) }}</td>
                <td>{{ revision.authorName }}</td>
                <td>{{ revision.createTimestamp|date('M j, H:i') }}</td>
            </tr>
        {%- endfor -%}
        <tbody>
    </table>

    {%- include 'app/paginator/paginator.html.twig' with {paginatorModel: revisionsModel.paginator} -%}

{% endblock %}
