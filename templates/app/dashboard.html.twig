{% extends 'app/app.base.html.twig' %}

{% block page_content %}

    <h1 class="mt-2">{{ 'Rules'|trans }}</h1>

    {% if dashboardModel.message %}
        <div class="alert alert-success" role="alert">
            {{ dashboardModel.message }}
        </div>
    {% endif %}

    <div class="list-group mb-3">
        {% for rule in dashboardModel.rules %}
            <a href="{{ path('DR\\GitCommitNotification\\Controller\\App\\RuleController', {id: rule.id}) }}"
               class="list-group-item list-group-item-action">
                <div class="d-flex w-100 justify-content-between">
                    <div>
                        {% if rule.active %}
                            <i class="bi-check-circle mr-1"></i>
                        {% else %}
                            <i class="bi-circle mr-1"></i>
                        {% endif %}
                        - {{ rule.name }} - {{ rule.ruleOptions.frequency }}
                    </div>
                    <button type="button"
                            class="float-right btn btn-danger"
                            data-role="delete-rule"
                            data-url="{{ path('DR\\GitCommitNotification\\Controller\\App\\DeleteRuleController', {id: rule.id}) }}"
                            data-method="DELETE"
                    >
                        &times;
                    </button>

                </div>

            </a>
        {% endfor %}
    </div>

    <a href="{{ path('DR\\GitCommitNotification\\Controller\\App\\RuleController') }}" class="btn btn-outline-primary">
        <i class="bi-plus"></i>
        {{ 'New rule'|trans }}
    </a>

{% endblock %}
